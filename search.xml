<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>电影0day命名方式的奥秘</title>
      <link href="/2021/10/26/dian-ying-0day-ming-ming-fang-shi-de-ao-mi/"/>
      <url>/2021/10/26/dian-ying-0day-ming-ming-fang-shi-de-ao-mi/</url>
      
        <content type="html"><![CDATA[<p>如果你是一位追求高清的电影的绅士或是经常混迹 <code>PT</code> 站的，那么一定喜欢现<code>4K</code> 蓝光电影的超高画质。在 <code>4K UHD</code> 蓝光格式被宣告破解后，网上已涌现了大量的 4K 原盘电影资源可下载了，那么既然有那么多资源供我们下载，应该如何在眼花缭乱的资源中找到自己合适的电影呢？下面 我就带大家逐一解读它们。</p><hr><p>​        <strong>一般来说，正规压制组压制的电影，都会采用 <code>0day</code> 的命名方式，如：英文名称、版本、年份、片源、分辨率、视频编码、音频格式、压制组。 例如文件名：Midway.DC.2019.1080p.AMZN.WEB-DL.DDP5.1.H.264-NTG</strong></p><p>解读：</p><ul><li><strong>英文名称：</strong>Midway</li><li><strong>版本说明：</strong>DC（导演剪辑版）</li><li><strong>发行年份：</strong>2019</li><li><strong>片源：</strong>AMZN</li><li><strong>分辨率：</strong>1080P</li><li><strong>视频编码：</strong>x264（H264）</li><li><strong>音频格式：</strong>DTS-HD MA5.1</li><li><strong>压制小组：</strong>NTG</li></ul><p><strong>注意：当然了</strong>一些发布社区或压制小组和字幕组也有自己独立的一套命名规则，连续剧跟电影也有一些差别。如第一季用 “S01” ，第一集用 “E01” 表示等。</p><hr><h2 id="关于版本"><a href="#关于版本" class="headerlink" title="关于版本"></a>关于版本</h2><ul><li><strong>PROPER：</strong><code>完美版</code>，先前发行的电影质量较差，而这个认为是较好的。</li><li><strong>REPACK：</strong><code>重新制作</code>发布，之前的版本就要回收。</li><li><strong>LIMITED：</strong>指在美国有限上映的片子，在少于 <code>500</code> 家电影院放映。</li><li><strong>DUPE：</strong>与别的组织 <code>Release</code> 有重复。</li><li><strong>IMAX：</strong>巨幕版，标准的 <code>IMAX</code> 银幕为 22 米宽、16 米高。</li><li><strong>UNRATE：</strong>未分级版</li><li><strong>R-RATE：</strong>有删节版</li><li><strong>SE：</strong><code>DVD</code> 特别版</li><li><strong>DC：</strong>导演剪辑版</li><li><strong>WITH EXTRAS：</strong>带花絮</li><li><strong>RERIP：</strong>同样电影重新 RIP</li><li><strong>SUBBED：</strong>有硬字幕（<code>非内嵌</code>）</li><li>**生肉:**指无字幕电影</li><li>**熟肉:**指翻译好自带字幕的影片</li></ul><hr><h2 id="片源"><a href="#片源" class="headerlink" title="片源"></a>片源</h2><h3 id="1、CAM（枪版）"><a href="#1、CAM（枪版）" class="headerlink" title="1、CAM（枪版）"></a>1、CAM（枪版）</h3><p><strong>CAM 通常是用数码摄像机从电影院盗录。</strong>有时会使用小三角架，但大多数时候不可能使用，所以摄像机会抖动。因此我们看到画面通常偏暗人物常常会失真，下方的字幕时常会出现倾斜。 由于声音是从摄像机自带的话筒录制，所以经常会录到观众的笑声等声音。因为这些因素，图象和声音质量通常都很差。</p><h3 id="2、TS（准枪版）"><a href="#2、TS（准枪版）" class="headerlink" title="2、TS（准枪版）"></a>2、TS（准枪版）</h3><p>TS 是 Tele Sync 的缩写。TS 与 CAM 版的标准是相同的。但<strong>它使用的是外置音源</strong>（一般是影院座椅上为听力不好的人设的耳机孔）这个音源不能保证是好的音源，因为受到很多背景噪音的干扰。TS 是在空的影院或是用专业摄像机在投影室录制，所以图象质量可能比 CAM 好。但画面的起伏很大。论坛上常出现的有一般 TS 版和经过修复清晰 TS 版。</p><h3 id="3、TC（胶片版）"><a href="#3、TC（胶片版）" class="headerlink" title="3、TC（胶片版）"></a>3、TC（胶片版）</h3><p>TC 是 Tele Cine 的缩写。TC 使用<strong>电视电影机从胶片直接数字拷贝。</strong>画面质量还不错,但亮度不足，有些昏暗。很多时候制作 TC 使用的音源来自 TS ，因此音质很差，但画面质量远好过 TS 。如果不是太讲究的话 TC 版还是不错的选择。</p><h3 id="4、DVDSCR（预售版）"><a href="#4、DVDSCR（预售版）" class="headerlink" title="4、DVDSCR（预售版）"></a>4、DVDSCR（预售版）</h3><p>SCR 是 Screener 的缩写。<strong>DVDSCR 预览版或者测试版的 DVD，非正式出版的版本。</strong>从预览版 DVD 中获取，通过 Mpeg-4 技术进行高质量压缩的视频格式。能比 DVDRip 早发布，但画质稍差。（经常有一些不在黑边里在屏幕下方滚动的消息，包含版权和反盗版电话号码 ，会影响观看。）如果没有严格的划分它的画质应与 TC 版差不多。</p><h3 id="5、R5、R6-版"><a href="#5、R5、R6-版" class="headerlink" title="5、R5、R6 版"></a>5、R5、R6 版</h3><p>R5、R6 就是 DVD 区域码，<strong>R5 是俄罗斯 5 区版的DVD，</strong>因为配音为俄语，所以需要去寻找英语音轨，R5 版本就是一种合成版本（俄 5 区 DVD 视频＋通过其它渠道获得的英语音轨），R5 版本的画质一般都不错，音频部分由于音轨的来源不同，效果有好有差。有的 R5 影片是带有原声英语的，为了表示区别，一般把带有原声的影片标为 [R5]，把合成音频的标为 [R5.LINE]。<br><strong>关于DVD区域码，现在世界被划分为六个区域，详细如下：</strong></p><ul><li><strong>1区：</strong>美国、加拿大（也就是下面的 DVDRip）</li><li><strong>2区：</strong>西欧、日本、南非</li><li><strong>3区：</strong>东南亚、中国香港、中国澳门、中国台湾</li><li><strong>4区：</strong>澳大利亚、西班牙语拉丁美洲</li><li><strong>5区：</strong>俄罗斯、东欧、非洲</li><li><strong>6区：</strong>中国大陆</li></ul><h3 id="6、DVDRIP（正式-DVD-版）"><a href="#6、DVDRIP（正式-DVD-版）" class="headerlink" title="6、DVDRIP（正式 DVD 版）"></a>6、DVDRIP（正式 DVD 版）</h3><p><strong>DVDRip 是从最终版的 DVD 转制，质量应该是较好的。</strong>将 DVD 的视频、音频、字幕剥离出来，再经过压缩或者其他处理，然后重新合成成多媒体文件。一般来说，DVDrip 由影音文件(后缀为 avi)和字幕文件组成。</p><h3 id="7、HDTVHDTV"><a href="#7、HDTVHDTV" class="headerlink" title="7、HDTVHDTV"></a>7、HDTVHDTV</h3><p>是 High Definition Television 的简称，翻译成中文是<strong>“高清晰度电视”</strong>的意思，画质次于BD，对于那些未发行蓝光的电影(比如很多老电影)，有 HDTV 版是很好的收藏选择，不过很多 HDTV源 都有台标，这也让很多收藏者很纠结。</p><h3 id="8、Remux、BluRay（蓝光原盘未压缩）"><a href="#8、Remux、BluRay（蓝光原盘未压缩）" class="headerlink" title="8、Remux、BluRay（蓝光原盘未压缩）"></a>8、Remux、BluRay（蓝光原盘未压缩）</h3><p><strong>蓝光原盘未压缩，清晰度最高，</strong>一部电影容量大概在 30GB ～ 50GB，一般两种写法都有，不过后一种 BluRay 如果跟着 X.264 或者 H.264 就不是蓝光原盘的清晰度了。</p><h3 id="9、BluRay-BDrip-BD（蓝光原盘）"><a href="#9、BluRay-BDrip-BD（蓝光原盘）" class="headerlink" title="9、BluRay / BDrip / BD（蓝光原盘）"></a>9、BluRay / BDrip / BD（蓝光原盘）</h3><p>BD 是 Blue Disk 的简称，翻译成中文是<strong>“蓝光影碟”</strong>的意思。采用不同压缩算法转录的蓝光电影文件，清晰度次之，但是兼顾了容量和清晰度两个角度的需求，一般这种电影容量大概是在 10GB ～ 20GB 之间，电影收藏必备版本。通常文件名中注明 “Bluray”的都是片源是 BD。不过有些注明是 “BRRip”，这说明该资源是二次重编码得到的，就是利用 BDrip 得到的 720P、1080P 资源转制的，而不是直接用蓝光原盘压制的。</p><h3 id="10、HR-HDTV（半高清）"><a href="#10、HR-HDTV（半高清）" class="headerlink" title="10、HR-HDTV（半高清）"></a>10、HR-HDTV（半高清）</h3><p><strong>简单说就是采集自电视节目的转录，比如高清电视台的录播内容，最直观的表现是带有台标，</strong>比如美剧、高清综艺等等很容易见到 HDTV 格式的片源；而 HDRip 就是将 HDTV 的视频内容进一步压缩，视频编码多采用 H.264、音频部分用 ACC 来处理清晰度要比 WebRip 再差一点。人人影视经常制作HR-HDTV的资源，不过这类资源无法明确片源，而且字幕是硬字幕，不利于收藏。它的优势就是体积小。</p><h3 id="11、WebRip、WEB-DL"><a href="#11、WebRip、WEB-DL" class="headerlink" title="11、WebRip、WEB-DL"></a>11、WebRip、WEB-DL</h3><p><strong>这种格式其实是为了 iTunes 而出现的（iTunes在线商店），</strong>清晰度还不错，但是体积要小很多，大多数采用 H.264 格式压缩。基本上，同一个片源，WebRip 可能只需要 5GB，而 BDRip 可能要到 8GB ～ 10GB 的样子（当然画质也有差别），相比 HDTV，无水印，无台标 LOGO，无插播广告，所以无任何剪切较完整。(国内也有不少 WEB-DL 的资源，这些视频源来自于迅雷数字商城、优酷电影等网站。</p><hr><h2 id="关于分辨率"><a href="#关于分辨率" class="headerlink" title="关于分辨率"></a>关于分辨率</h2><p><code>720P</code>、<code>1080P</code>、<code>4K</code>、<code>5K</code> 和 <code>MP</code> 等经常是用来表示视频的分辨率，但是如此多的称呼难免会让人混淆和困惑，现在小沃这带大家一起了解下其具体含义：<br>“P”<br><strong>720P、1080P 表示的是“视频像素的总行数”，</strong>例如：720P 表示的是视频有 720 行像素，1080P 则表示视频总共有 1080 行的像素数。1080P 分辨率的摄像机像素数是 1920 X 1080。“P”（Progressive 的缩写）本身表示的是“逐行扫描”。如今，摄像机基本都是逐行扫描模式，相对于隔行扫描（Interlaced），“P”的意义已经不大了。</p><p>“K”<br><strong>2K、4K 等是表示“视频像素的总列数”；</strong>例如 4K, 表示的是视频有 4000 列的像素数，具体是 3840 列或 4096 列。4K 分辨率的摄像机像素数有两种，第一种是：4096 X 2160；第二种是：3840 X 2160。</p><p>“MP”<br><strong>MP 代表的是像素总数，</strong>指像素的行数（P）与列数(K)相乘后的一个结果（百万像素），在高清网络摄像机中，我们通常叫成百万或者两百万像素的摄像机：</p><ul><li><strong>1080P</strong> 分辨率为 <code>1920 X 1080</code> 像素，实际像素为 2073600，通常都会将 1080p 或 1080i 叫 200 万像素分辨率</li><li><strong>960P</strong> 分辨率为 <code>1280 X 960</code> 像素，实际像素为 228800，通常都会将 960p 或 960i 叫 130 万像素分辨率</li><li><strong>720P</strong> 分辨率为 <code>1280 X 720</code> 像素，实际像素为 921600，通常都会将 720p 或 720i 叫 100 万像素分辨率</li></ul><hr><h2 id="关于视频编码"><a href="#关于视频编码" class="headerlink" title="关于视频编码"></a>关于视频编码</h2><h3 id="H-264"><a href="#H-264" class="headerlink" title="H.264"></a>H.264</h3><p><strong>H.264 隶属于 MPEG-4 编码，也是当前最流行的一种编码方式，H264 的优点是在目前影视文件中容量最小的 RAW，</strong>缺点是编码时需要大量运算时间，H264 支持硬件加速，H264 支持自变速满帧技术(15fps ～ 6000fps)，H264 编码的文件最大特征是后缀名为 .h264。比如小编前面说到了 BluRay 后面如果跟着 H.264 就是使用这种编码处理过的，清晰度基本一致，但是容量大幅减少（相对蓝光原盘）。</p><h3 id="X264"><a href="#X264" class="headerlink" title="X264"></a>X264</h3><p><strong>严格意义上说 X264 不是独立于 H.264 的编码技术，X264 是 H264 的另外一种开源编码格式，</strong>其开头的 “X” 意思是 “Software”，是使用 CPU 软解码的一种视频格式，所以，X264 不支持硬件加速，纯粹靠 CPU 来解压播放——当然好处显而易见，兼容性极佳。尤其是现在 CPU 的运算能力都足够好，所以在播放视频的时候也看不出太大区别（CPU 占用率会比 H.264 编码的高）。</p><h3 id="AVC1"><a href="#AVC1" class="headerlink" title="AVC1"></a>AVC1</h3><p><strong>AVC1 其实也是 H.264 编码的一种，这不过是苹果特立独行的产物罢了，</strong>苹果开发的符合 H.264 / AVC 标准的编码就被叫做 AVC1。注意很多 WEB-DL 的电影文件名里都有 AVC 字样。</p><h3 id="H-265"><a href="#H-265" class="headerlink" title="H.265"></a>H.265</h3><p><strong>H.265 是未来之王，它很快就会取代 H.264 成为新一代的视频编码全面普及。</strong>简单说，它的压缩算法更加高效，H.265 在有限带宽下传输更高质量的网络视频，仅需原先的一半带宽即可播放相同质量的视频。举个例子，同样一个 1080P 高清电影，用 H.264 压缩后，容量可能是 10GB；而采用 H.265 编码压缩，视频效果一致的情况下，容量只有 5GB，不过，H.265 现在还没普及是因为支持这个编码硬解的方案还不够普及，电脑上六代酷睿以后的处理器才支持 H.265 编码；手机上需要晓龙 808 / helio X10 以后的处理器才能支持（同代中端也可以）；电视盒要 HI3796M / AmlogicS905 / RK3368 等等以上才可以支持。显然，这距离普及还有一点距离。</p><hr><h2 id="关于音频格式"><a href="#关于音频格式" class="headerlink" title="关于音频格式"></a>关于音频格式</h2><h3 id="DTS-DTS-HD-MA"><a href="#DTS-DTS-HD-MA" class="headerlink" title="DTS / DTS-HD MA"></a>DTS / DTS-HD MA</h3><p><strong>DTS 属于 DVD 时代的音频标杆，</strong>有损音频压缩格式，分为 1.5Mbps 的全码 DTS 和半码 DTS；<br><strong>DTS-HD MA 属于蓝光音频标准之一，</strong>为音频无损压缩格式，码率在 3 ~ 4Mbps 不等，在 PC 上兼容性不是很好，如果不能识别 MA，那么只能解码 DTS core 部分，可以用 TSMUXER / eac3to 等工具提取 DTS core 核心。<br>DTS 是一种效率低下的编码格式（CBR），除非是兼容性考虑，不建议你收藏电影时使用 DTS 音轨。</p><h3 id="AC3-TrueHD"><a href="#AC3-TrueHD" class="headerlink" title="AC3 / TrueHD"></a>AC3 / TrueHD</h3><p>AC3 为有损编码格式（CBR），常见于 DVD / BD，码率最高为 640k，5.1 声道通常有 640、448、384 这几种码率。<br><strong>TrueHD 属于蓝光音频标准之一，</strong>音频无损压缩格式，一般都可以从 TrueHD 中提取 AC3 核心。</p><h3 id="AAC-HE-AAC"><a href="#AAC-HE-AAC" class="headerlink" title="AAC / HE-AAC"></a>AAC / HE-AAC</h3><p><strong>AAC 是最高效的音频有损编码格式，</strong>如使用 NeroAAC 编码器，建议使用 <code>-q</code> 模式控制码率。<br>HE-AAC 是在 AAC 的基础上增加了 SBR（频段复制）和 PS（参量立体声）技术，通常用于语音通话、数据存档这些应用上，不建议用在电影或音乐上。</p><h3 id="MP3"><a href="#MP3" class="headerlink" title="MP3"></a>MP3</h3><p><strong>应用于早期的 DVDRip</strong>，不支持 5.1 声道，如今几乎没有在使用了。</p><h3 id="PCM-LPCM-FLAC"><a href="#PCM-LPCM-FLAC" class="headerlink" title="PCM / LPCM / FLAC"></a>PCM / LPCM / FLAC</h3><p>PCM / LPCM常见于 BD，是一种<strong>无损格式</strong>，不做压缩，类似 <code>WAV</code>。<br>FLAC 是<strong>最好用的音频无损压缩格式</strong>，编码器开源，在 PC 上兼容性好，压缩率优于 DTS-HD MA 和 TrueHD。</p><hr><h2 id="关于字幕"><a href="#关于字幕" class="headerlink" title="关于字幕"></a>关于字幕</h2><h3 id="ASS-SSA"><a href="#ASS-SSA" class="headerlink" title="ASS/SSA"></a>ASS/SSA</h3><p>SSA 全称 SubStation Alpha, 是由 CS Low（又称 <code>Kotus</code>）创建的一种字幕格式, 用以实现比传统字幕诸如 SRT 等格式更为复杂的功能。<br>SSA 字幕也是文本文件，可以使用 Windows 的记事本直接打开和编辑。与 SRT 相比 SSA 字幕文件功能比较多，<strong>可以定义字体格式、字体颜色、字体大小等。</strong></p><h3 id="SRT"><a href="#SRT" class="headerlink" title="SRT"></a>SRT</h3><p>SRT 字幕是文本文件，也可以使用 Windows 的记事本直接打开和编辑。<strong>SRT 字幕是目前最为流行字幕格式，因为其制作规范简单，一句时间代码加一句字幕，使得制作修改就相当容易。</strong></p><h3 id="IDX-SUB"><a href="#IDX-SUB" class="headerlink" title="IDX+SUB"></a>IDX+SUB</h3><p><strong>SUB 是一种图形格式字幕，</strong>DVD 光盘里面使用的就是这种字幕文件。一般由 <code>IDX</code> 和 <code>SUB</code> 文件组成，有时也能看到 <code>IFO</code> 文件，不过这个现在已经不怎么用的上了。IDX 相当于索引文件，里面包括了字幕出现的时间码和字幕显示属性等。SUB 文件就是存放字幕本身了，注意是图片格式的，所以比较大，动辄 10M 以上了。IDX+SUB 可以存放很多语言的字幕，提供了在播放的时候的选择。</p><hr><p>这么多名词看的有点头疼？没关系，收藏本页面要用的时候对照着看，其实我自己也记不住才会写这篇文章方便自己后期查阅，另外本人对这方面了解也并不是非常深，如有说错的可以QQ给我留言，最后想流畅播放高码率的 4K 原盘，最好选择支持<strong>4K 视频硬解码</strong>的显卡。目前第七代 <code>Intel (i7)</code> 开始 CPU 的核显以可支持全硬解；NVIDIA 的 10xx 系列以及 AMD RX400 以上的独立显卡也都实现了原生的 4K 视频全硬解以及 HDR 技术支持。如果钱包不允许你这样也不要紧软解码也还是能解决部分的问题。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GCP开启ssh密码登陆</title>
      <link href="/2021/10/26/gcp-kai-qi-ssh-mi-ma-deng-lu/"/>
      <url>/2021/10/26/gcp-kai-qi-ssh-mi-ma-deng-lu/</url>
      
        <content type="html"><![CDATA[<h1 id="一、开启密码登陆"><a href="#一、开启密码登陆" class="headerlink" title="一、开启密码登陆"></a>一、开启密码登陆</h1><h2 id="1、修改ssh配置文件"><a href="#1、修改ssh配置文件" class="headerlink" title="1、修改ssh配置文件"></a>1、修改ssh配置文件</h2><pre><code>nano /etc/ssh/sshd_config</code></pre><h2 id="2、修改下面两个参数，把no改为yes"><a href="#2、修改下面两个参数，把no改为yes" class="headerlink" title="2、修改下面两个参数，把no改为yes"></a>2、修改下面两个参数，把no改为yes</h2><pre><code>PermitRootLogin noPasswordAuthentication no</code></pre><h2 id="3、更改完毕使用Ctrl-O-保存后使用Ctrl-X-退出。"><a href="#3、更改完毕使用Ctrl-O-保存后使用Ctrl-X-退出。" class="headerlink" title="3、更改完毕使用Ctrl + O 保存后使用Ctrl + X 退出。"></a>3、更改完毕使用Ctrl + O 保存后使用Ctrl + X 退出。</h2><h2 id="4、重启ssh服务"><a href="#4、重启ssh服务" class="headerlink" title="4、重启ssh服务"></a>4、重启ssh服务</h2><pre><code>service sshd restart</code></pre><h2 id="5、为root帐户设置密码"><a href="#5、为root帐户设置密码" class="headerlink" title="5、为root帐户设置密码"></a>5、为root帐户设置密码</h2><pre><code>passwd root</code></pre><p>6、输入命令后会让你设置密码，正确输入两次密码即可完成设置。然后你就可以通过ssh root账号和密码登录服务器了。</p>]]></content>
      
      
      <categories>
          
          <category> GCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GCP </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Google搬山之术</title>
      <link href="/2021/10/26/google-ban-shan-zhi-zhu/"/>
      <url>/2021/10/26/google-ban-shan-zhi-zhu/</url>
      
        <content type="html"><![CDATA[<h2 id="系统环境：-CentOS-7-x64"><a href="#系统环境：-CentOS-7-x64" class="headerlink" title="系统环境： CentOS 7 x64"></a><strong>系统环境：</strong> CentOS 7 x64</h2><p>Google Drive 是个好东西，无限容量配合上 Rclone 这样的 API 工具，简直是资源收集的神器。</p><p>不过谷歌对于每个账户的 API 限制是 750G / 24小时 ，对于各位搬运道人来说每天只搬运 750 G 的资源肯定是不够的。最近了解到一个新的神器 - fclone（项目地址：<a href="http://github.com/mawaya/rclone">http://github.com/mawaya/rclone</a>），可以看作是 Rclone 的升级版，借助它，再搭配一些奇技淫巧，就可以突破每天 750 G 的 API 限制了。</p><p>原理:单日 750 G 的限制是谷歌对每个账号进行的限制，而我们可以借助谷歌开发者平台创建一些项目（Project），每个项目下可以创建很多服务账号（即 Service Accounts ，以下简称 SA），每个 SA 都有自己的 API ，也就是说每个 SA 每天都有 750 G 的限额。通过赋予这些 SA 对于【源盘】（即待转存资源的存放位置，可以是个人盘的共享目录，团队盘或团队盘内的文件夹）和【目的盘】（即资源转存后的存放位置，可以是团队盘或团队盘内的文件夹）的编辑权限，再通过 fclone ，当每个 SA 达到 750 G 限制后自动切换，就可以突破单账号的单日 750 G 限制。</p><p>其中，每个谷歌账号可以创建最多 12 个项目，每个项目下可以生成最多 100 个 SA ，即使只使用 1 个项目，也可以实现一天搬运 1 x 100 x 750 G = 75 T ，相信对大部分人来说已经足够了，不够的话多创建几个项目就行（注意每个团队盘最多添加 600 个账号）。</p><h2 id="配置过程："><a href="#配置过程：" class="headerlink" title="配置过程："></a>配置过程：</h2><h2 id="1-借助-AutoRclone-批量生成-SA"><a href="#1-借助-AutoRclone-批量生成-SA" class="headerlink" title="1.借助 AutoRclone 批量生成 SA"></a>1.借助 AutoRclone 批量生成 SA</h2><p>批量生成 SA 需要用到另外一个项目 - AutoRclone（项目地址：<a href="http://github.com/xyou365/AutoRclone">http://github.com/xyou365/AutoRclone)</a></p><p>首先安装 python 3 和 AutoRclone：</p><pre><code>yum install -y python3 python3-pip git # 安装系统依赖 git clone http://github.com/xyou365/AutoRclone # 拉取 AutoRclone 项目cd AutoRclone # 进入项目文件夹 pip3 install -r requirements.txt # 安装项目依赖</code></pre><p>然后打开这个地址：<a href="http://developers.google.com/drive/api/v3/quickstart/python">http://developers.google.com/drive/api/v3/quickstart/python</a> ，点击【Step 1: Turn on the Drive API】下面的 <code>Enable the Drive API</code> 按钮，弹出的【Configure your OAuth client】对话框中保持默认的 <code>Desktop app</code> 不要动，点击右下角 <code>CREATE</code> 按钮，开启成功之后点击 <code>DOWNLOAD CLIENT CONFIGURATION</code> 下载生成的 <code>credentials.json</code> ，再将下载到本地的 <code>credentials.json</code> 上传至服务器的 <code>AutoRclone</code> 文件夹下。</p><ul><li><p>快速方法（不推荐，有时会出现 bug）：此时回到 SSH ，执行 <code>python3 gen_sa_accounts.py --quick-setup 1</code> ，复制返回的网址至浏览器打开，登陆上一步生成 <code>credientials.json</code> 文件时使用的账号，选择 <code>允许</code> ，然后复制返回的授权代码，粘贴至 SSH 终端，再复制新返回的网址至浏览器打开，使用刚才的账号登陆，点击 <code>启用</code> ，回到 SSH 终端内按下回车，此时应该开始创建 SA 了，稍等片刻完成后可以看到 <code>/root/AutoRclone/accounts/</code> 目录下出现了一大堆 <code>.json</code> 后缀的 SA 授权文件。</p></li><li><p>手动方法（推荐）：</p><ol><li><p>回到 SSH ，执行 </p><pre><code>python3 gen_sa_accounts.py --list-projects</code></pre><p>；</p><ul><li>如果之前没有创建过项目的话返回值应该是空的，那么此时执行 <code>python3 gen_sa_accounts.py --create-projects 1</code> 来新建一个项目，之后再次 <code>python3 gen_sa_accounts.py --list-projects</code>，复制一下新建的项目名称，下一步要用到；</li><li>如果已存在项目，且要使用已有项目来生成 SA（请确保你知道自己在做什么），那么复制一下想要生成 SA 的项目名称，否则参考上一条的步骤来新建一个项目；</li></ul></li><li><p>执行 <code>python3 gen_sa_accounts.py --enable-services ProjectName</code> 为项目开启所需要的服务，<code>ProjectName</code> 为上一步复制的项目名称，开启方法参考上文【快速方法】中的描述；</p></li><li><p>执行 <code>python3 gen_sa_accounts.py --create-sas ProjectName</code> 为项目生成 SA；</p></li><li><p>执行 <code>python3 gen_sa_accounts.py --download-keys ProjectName</code> 下载项目中 SA 的授权文件，稍等片刻 <code>~/AutoRclone/accounts/</code> 目录下应该出现了一大堆 <code>.json</code> 后缀的 SA 授权文件。</p></li></ol></li></ul><p>这些授权文件就是本文搬山之术的核心，其中记录了每个 SA 相应的权限信息。</p><h2 id="2-为-SA-添加权限"><a href="#2-为-SA-添加权限" class="headerlink" title="2.为 SA 添加权限"></a>2.为 SA 添加权限</h2><p>这个部分非常繁琐，主要是因为这一过程俺只能手动完成，如果你有 G-Suite 管理员权限，那么可以参考 通过</p><pre><code>python3 add_to_google_group.py -g **@***.com （创建一个群组，创建好你会获得一个类似域名邮箱的地址 **@***.com）</code></pre><p>来快速添加，下面是手动方法：</p><p>在此处：<a href="http://console.developers.google.com/apis/dashboard">http://console.developers.google.com/apis/dashboard</a> ，点击左侧的 <code>凭据</code> 可以看到创建好的项目及 SA ，自行想办法将 SA 的邮箱地址保存下来（快速提取 SA 的邮箱地址可以参考这篇文章：<a href="http://fxxkr.com/2020/04/06/onekey-print-email-from-google-sa-json/">一行命令提取 SA 文件中 email 自动10行分组 – FXXKR LAB</a> ）。</p><p>接下来创建群组。打开 <a href="http://groups.google.com/">http://groups.google.com/</a> ，点击左上角的 <code>新建群组</code> ，填写相关信息后新建一个群组，建立好后点击右上角 <code>管理群组</code> ，点击左侧 <code>直接添加成员</code> ，将刚才保存的 SA 邮箱粘贴过来，注意每次只能添加 10 个，24 小时内只能添加 100 个，每个群组最多添加 600 个，邮箱地址间使用英文逗号分隔。</p><p>全部添加好之后点击右上角 <code>关于</code> ，记下【群组电子邮件】的地址，之后要对所有加入了群组的 SA 添加权限时，只需要添加至这个群组邮箱就行了。</p><h2 id="3-使用-fclone-开始搬山"><a href="#3-使用-fclone-开始搬山" class="headerlink" title="3.使用 fclone 开始搬山"></a>3.使用 fclone 开始搬山</h2><p>繁琐的配置过程完成后，安装 fclone ：</p><p>编辑 Rclone 配置文件：</p><pre><code>vim ~/.config/rclone/rclone.conf</code></pre><p>默认的配置文件路径在这里，不确定的话可以输入 <code>fclone config file</code> 来查看。</p><p>在最后加上下面内容：</p><pre><code>[gc] type = drive scope = drive service_account_file = /root/AutoRclone/accounts/1.json (SA 账号授权文件的文件夹路径下任意一个 SA 账号授权文件的路径) service_account_file_path = /root/AutoRclone/accounts/ (SA 账号授权文件的文件夹路径，不要漏了最后的/)</code></pre><p>用法：</p><p>命令参数参考 Rclone ，都是一样的，直接将 <code>rclone</code> 换成 <code>fclone</code> 即可无障碍使用（Rclone 怎么用呢，请参考 <a href="http://wvw.lbdcj.top/835.html">这篇文章</a> ）；</p><p>唯一不一样的地方在于，原版 Rclone 如果跨团队盘或者共享文件夹，需要多个配置盘符用于操作，gclone 支持对目录和文件的 ID 进行操作，搬运别人公开分享的文件时非常方便：</p><ol><li><p>目录 ID ：共享目录和团队盘应该带 </p><pre><code>--drive-server-side-across-configs</code></pre><p>：</p><pre><code>fclone copy gc:&#123;【源盘】ID&#125; gc:&#123;【目的盘】ID&#125; --drive-server-side-across-configs</code></pre><p>目录 ID 可以是：普通目录，共享目录，团队盘；</p><p>也支持目录 ID 后跟后续路径：</p><pre><code>fclone copy gc:&#123;【源盘】ID&#125; gc:&#123;【目的盘】ID&#125;/media/ --drive-server-side-across-configs</code></pre></li><li><p>文件 ID：共享目录和团队盘应该带 </p><pre><code>--drive-server-side-across-configs</code></pre><p>：</p><pre><code>fclone copy gc:&#123;共享文件的 ID&#125; gc:&#123;【目的盘】ID&#125; --drive-server-side-across-configs</code></pre><p>支持目录 ID 后，跟后续路径：</p><pre><code>fclone copy gc:&#123;共享文件的 ID&#125; gc:&#123;【目的盘】ID&#125;/media/ --drive-server-side-across-configs</code></pre></li></ol><blockquote><p>注意：命令中如果使用 ID 格式来指定路径，需要用花括号括起来，不然程序会认为那一串乱码一样的东西是文件夹名字而不是目录 ID。</p></blockquote><p>举个栗子：</p><pre><code>fclone copy gc:&#123;0App-QeDCIy_mUk9PVA&#125; gc:&#123;10zOvIf8yBmIuZgBfC3rcDKWHIlODZjXF&#125;/media/ --drive-server-side-across-configs -P</code></pre><p>如何查看团队盘，文件夹以及文件的 ID ：</p><ul><li>浏览器中打开对应的团队盘 / 文件夹 / 文件，此时查看地址栏中类似 <code>http://drive.google.com/drive/u/2/folders/0App-QeDCIy_mUk9PVA</code> 这样的地址，其中末尾的 <code>0App-QeDCIy_mUk9PVA</code> 就是相应的团队盘 / 文件夹 / 文件对应的 ID 了，如果是别人分享出来的内容，那么结尾一般会多 <code>?usp=sharing</code> 这一段，把这段删掉，只保留 ID 就可以了。</li></ul><h2 id="4-一些注意事项"><a href="#4-一些注意事项" class="headerlink" title="4.一些注意事项"></a>4.一些注意事项</h2><ol><li><p>生成 SA 及创建 Google Groups 使用普通的谷歌账号就可以；</p></li><li><p>创建好 SA ，并将其加入到群组之后，对于需要搬运的资源，保证【源盘】和【目的盘】都给这个群组的【群组邮箱】权限就能搬了，【源盘】有读取权限就够了，【目的盘】需要编辑权限；</p></li><li><p>基于以上两点，即使你没有 G-Suite 账号（即没法自己开团队盘），只要加入了别人开给你的团队盘（网上有部分大佬提供这方面的资源，收费免费的都有，请自行寻找），并有加人权限，那么就可以参照本文教程开始搬山了；</p></li><li><p>如果要更换机器，只需要把【SA 授权文件】（本例中在 <code>/root/AutoRclone/accounts/</code> 路径下）及【gclone 配置文件】（本例中路径为 <code>/root/.config/rclone/rclone.conf</code>）备份，在新机器上安装好 gclone 并在配置文件中修改一下 SA 授权文件的路径就可以直接使用了；</p></li><li><p>生成 SA 过程中如果 AutoRclone 遇到什么奇怪的错误，请善用 <code>python3 gen_sa_accounts.py --help</code>；</p></li><li><p>单个团队盘限制 40 W 文件数，注意不要超限；</p></li><li><p>文件数比较多的话，直接 </p><pre><code>gclone copy</code></pre><p> 可能会漏文件或重复复制，这是因为复制过程中切换 SA 和 Google Drive 允许重名文件两个原因导致的，解决办法：</p><ol><li><ol><li>首先对【源盘】执行 <code>rclone dedupe</code> 命令，确保源盘无重复文件，命令用法:</li></ol></li></ol><pre><code>rclone dedupe drive_name:path</code></pre><p> 命令可以对云盘文件去重，当文件夹路径相同时会合并，文件 MD5 相同时会删除重复的，仅保留一份，MD5 不同时的默认是交互式操作，询问你保留那个。有大量重复文件时可以使用 </p><pre><code>--dedupe-mode MODE</code></pre><p> 参数来指定处理策略，</p><pre><code>MODE</code></pre><p> 可以为 </p><pre><code>interactive</code></pre><p>（默认），</p><pre><code>skip</code></pre><p> ，</p><pre><code>first</code></pre><p> ，</p><pre><code>newest</code></pre><p> ，</p><pre><code>oldest</code></pre><p> ，</p><pre><code>largest</code></pre><p> ，</p><pre><code>smallest</code></pre><p> ，</p><pre><code>rename</code></pre><p>，顾名思义即可。</p><pre><code>sync</code></pre></li><li><p>跑完一遍  <code>copy</code> 后使用 <code>rclone size</code> 分别查看【源盘】和【目的盘】的文件数和大小（<code>size</code> 命令使用 gclone 会有点 bug ，所以此处切换回 Rclone），如果【源盘】大于目标盘，说明没复制完全，多跑几次  <code>copy</code> 命令后再比较，直到【目的盘】大于【源盘】，说明有重复文件了，此时使用 <code>dedupe</code> 命令对【目的盘】去重；</p></li><li><p>再次 <code>size</code> 查看文件数，如果【源盘】文件数大于【目的盘】，就重复  <code>copy</code> 命令，如果【源盘】小于【目的盘】，就使用 <code>dedupe</code> 命令去重；</p></li><li><p>重复以上步骤，直到 <code>rclone size</code> 后【源盘】和【目的盘】的文件数和大小严格相等。</p></li></ol><p>这个问题多出现在【源盘】是个人盘的共享文件夹，且包含的文件数较多的时候，因为个人盘的 API 有点 bug ，会导致分享的文件数较多时，通过 API 操作时读取到的文件列表不全，需要等待一段时间才能读取完全，团队盘一般不会出现这个问题。</p><ul><li><ul><li><p>以上方法只适用于【目的盘】是团队盘的情况。【目的盘】是个人盘（比如无限容量的教育邮箱）的情况稍微有点复杂：</p><ol><li>像上文【<a href="http://wvw.lbdcj.top/1142.html">3.使用 gclone 开始搬山</a>】中的示例一样直接使用会报错，原因是使用了 SA 向个人盘来写入文件，但个人盘只有号主自己有写入权限，无法使用 SA；</li><li>如何向个人盘搬运：可以使用类似 <code>gclone gc:&#123;【源盘】ID&#125; he-sb:&#123;文件夹 ID&#125;/路径/</code> 格式的命令，其中 <code>he-sb</code> 是通过 <code>rclone config</code> 配置好的个人盘配置名称。命令格式和配置文件与原版 Rclone 是一致的（因为 gclone 其实就是魔改的 Rclone，除了【自动切换 SA】和【使用目录 ID 代替路径】以外的功能大家就把它当作 Rclone 来用就好了）。</li></ol><p>通过以上两点，想必大家已经看出来了———当【目的盘】是个人盘的时候是无法突破每日 750 G 限制的，这是 Google Drive 权限的限制，目前还没见到有人能解决。</p></li></ul></li></ul><p>11.手动解决 AutoRclone 配置时发生的错误</p><p><img src="http://files.lbdcj.top/wvw/AutoRclone/1.jpg" alt="img"></p><p>正常情况 ‘–quick-setup’ 标签会自动完成 创建+启动项目 并 创建+下载SA全过程<br>如果碰到以上图示错误怎么处理<br>经过多次’胡乱测试’，基本上与以下几点原因有关<br>(1)因为与googleapis的通信原因造成的错误<br>(2)Project中有曾经删除但未到期1个月未完全删除的项目存在会被AutoRclone读取<br>由于个人情况不同，可能因为网络，也可能是其他原因无法得知大家的错误具体在哪一步<br>下面给出统一解决方案<br>为了防止接下来手动创建步骤的SA与本地不完整的文件重复<br>删除本地所有SA文件</p><pre><code>rm -i ~/AutoRclone/accounts/*</code></pre><p>接下来开始手动步骤，确认项目是否已创建</p><pre><code>python3 gen_sa_accounts.py --list-projects</code></pre><p>或手动前往 cloud-resource-manager 查看项目是否成功创建<br>情况分两种<br>(1)未成功创建，需手动创建，回到 SSH 窗口输入以下命令</p><pre><code>python3 gen_sa_accounts.py --create-projects $NUM</code></pre><p>$NUM 解释请翻阅上文<br>执行作者提供的重置所有项目命令</p><pre><code>python3 gen_sa_accounts.py --quick-setup -1</code></pre><p>如果还是看到以下图示错误，请手动执行(2)步骤</p><p><img src="http://files.lbdcj.top/wvw/AutoRclone/2.jpg" alt="img"><br>(2)项目成功创建，但项目未正常启用服务 + 创建并下载 SA 文件<br>输入以下命令，并记录所有的 saf 开头的项目名</p><pre><code>python3 gen_sa_accounts.py --list-projects | grep &#39;saf&#39;</code></pre><p>对项目开启对应服务</p><pre><code>python3 gen_sa_accounts.py --enable-services saf-xxxxxxxx#你有几个 saf 项目就对应输入几次 saf-xxxxx 替换为上一步你记录的项目名</code></pre><p>重置项目中所有的 SA</p><pre><code>python3 gen_sa_accounts.py --quick-setup -1#此时再遇到上文(1)中错误或任何其他错误可以不予理会</code></pre><p>下载 SA 文件至 accounts 目录</p><pre><code>python3 gen_sa_accounts.py --path accounts --download-keys saf-xxxxxx#你有几个 saf 项目就对应输入几次 saf-xxxxx 替换为上一步你记录的项目名</code></pre>]]></content>
      
      
      <categories>
          
          <category> Google </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google </tag>
            
            <tag> Google Drive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rclone上传参数</title>
      <link href="/2021/10/26/rclone-shang-chuan-can-shu/"/>
      <url>/2021/10/26/rclone-shang-chuan-can-shu/</url>
      
        <content type="html"><![CDATA[<p>我的上传命令用的是这个</p><pre><code>rclone copy /zyz GD:zyz</code></pre><h2 id="常用附加参数"><a href="#常用附加参数" class="headerlink" title="常用附加参数"></a>常用附加参数</h2><p>–ignore-existing -u -v -P –transfers=10 –ignore-errors –buffer-size=100M –check-first –checkers=10</p><p>–ignore-existing<br>使用此选项将使rclone无条件地跳过目标上存在的所有文件，无论这些文件的内容如何。</p><p>尽管通常不建议使用此选项，但在文件由于加密而更改的情况下很有用。但是，在传输中断的情况下，它无法纠正部分传输。</p><h2 id="个人建议"><a href="#个人建议" class="headerlink" title="个人建议"></a>个人建议</h2><p>和U/check一起时候需要注意冲突（虽然也能执行，效果不同），根据需求开启</p><p>–check-first –checkers=10<br>如果设置了此标志，则在一sync，copy或move，rclone会做所有的检查，看是否文件需要做任何的转移之前转移。通常，rclone将尽快开始运行传输。</p><p>该标志在传输受限于IO的IO受限系统上很有用。</p><p>使用此标志可以占用更多内存，因为它实际上设置 –max-backlog为无限。这意味着在传输开始之前，所有有关传输对象的信息都保存在内存中。<br>要并行运行的检查程序的数量。校验器在同步期间对文件进行相等性检查。对于某些存储系统（例如S3，Swift，Dropbox），这可能会花费大量时间，因此它们可以并行运行。<br>默认为并行运行8个检查程序。<br>个人建议<br>如果你带宽跑不满，那就往上拉，小文件多，也往上拉，注意内存使用</p><p>另外Gclone不支持这个，Rclone/Fclone正常</p><p>-u<br>这将强制rclone跳过目标上存在的任何文件，并且修改后的时间比源文件新。</p><p>当直接传输到不支持mod时间的远程服务器（或–use-server-modtime用于避免额外的API调用）时，此方法很有用，因为它比–size-only检查更准确，比using更快–checksum。</p><p>如果现有目标文件的修改时间与源文件的修改时间相等（在计算的修改窗口精度内），则文件大小不同时将对其进行更新。如果–checksum设置为，则如果校验和也不同，则rclone将更新目标。</p><p>如果现有目标文件早于源文件，则如果大小或校验和与源文件不同，它将被更新。</p><p>在不直接（或使用–use-server-modtime）不支持mod时间的遥控器上， 检查的时间将是上载的时间。这意味着，如果上载到这些远程控制器之一，则rclone将跳过目标上存在的任何文件，并且上载时间比源文件的修改时间新。</p><p>-v</p><p>使用-vrclone可以告诉您有关传输的每个文件以及少量重要事件的信息。</p><p>使用-vvrclone会变得非常冗长，告诉您它考虑和传输的每个文件。请发送带有此设置的日志的错误报告。</p><p>-P</p><p>该标志使rclone更新终端中静态块中的统计信息，从而提供传输的实时概览。</p><p>任何日志消息都将滚动到静态块上方。日志消息会将静态块向下推到将要停留的终端底部。</p><p>通常，此间隔每500mS更新一次，但是可以用该–stats标志覆盖该时间段。<br>可以与–stats-one-line标志一起使用，以简化显示。<br>注意：在Windows上，在修复此错误之前， 所有非ASCII字符都将在使用.时 替换–progress为。</p><p>–transfers=10<br>要并行运行的文件传输数。如果遥控器的超时时间很多，将其设置为较小的值有时会很有用；如果您的带宽较大且使用快速的遥控器，则将其设置为更大的值有时会很有用。</p><p>默认为并行运行4个文件传输。</p><p>–buffer-size=200M</p><p>使用此大小的缓冲区可加快文件传输速度。每个人都–transfer 将使用这么多的内存进行缓冲。</p><p>当使用mount或cmount每个打开的文件描述符时，都将使用这么多的内存进行缓冲。有关更多详细信息，请参见安装文档。</p><p>设置为0禁用缓冲以最小化内存使用量。</p><p>请注意，缓冲区的内存分配受 –use-mmap标志的影响。</p><h2 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h2><p>默认据说是16M，内存占用量大概就是buffer-size和transfers的乘积</p><p>10X200M=2G，但是实际占用更大，大概在4G左右</p><p>–ignore-errors<br>跳过错误。比如 OneDrive 在传了某些特殊文件后会提示Failed to copy: failed to open source object: malwareDetected: Malware detected，这会导致后续的传输任务被终止掉，此时就可以加上这个参数跳过错误。但需要注意 RCLONE 的退出状态码不会为0。</p>]]></content>
      
      
      <categories>
          
          <category> Rclone </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rclone </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMware vSphere 下 NVIDIA vGPU 驱动的安装和配置</title>
      <link href="/2021/10/09/vmware-vsphere-xia-nvidia-vgpu-qu-dong-de-an-zhuang-he-pei-zhi/"/>
      <url>/2021/10/09/vmware-vsphere-xia-nvidia-vgpu-qu-dong-de-an-zhuang-he-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p>在vSphere平台下安装vGPU驱动之前需要打开ESXi的SSH服务，方便来传输vib驱动安装包以及后面一些命令行的操作。</p><p>ESXi需要加入vCenter，vGPU相关的一些配置都需要在vCenter下来修改。</p><p><a href="https://www.dingqian.net/usr/uploads/2020/03/2131086977.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/2131086977.png" alt="img"></a></p><p>使用WinSCP把驱动vib传到ESXi的/tmp目录下</p><p><a href="https://www.dingqian.net/usr/uploads/2020/03/1250825920.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/1250825920.png" alt="img"></a></p><p>安装驱动之前先检查一下GPU是否被正常识别到，SSH到ESXi，使用命令：<strong>lspci | grep NVIDIA</strong> 来检查。</p><p><a href="https://www.dingqian.net/usr/uploads/2020/03/1809989337.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/1809989337.png" alt="img"></a></p><p>到/tmp目录下，赋予vib驱动包可执行权限，然后使用esxcli命令进行安装，注意ESXi主机需要处于维护模式，可以在web client上修改，也可以在安装时加上–maintenance-mode参数。</p><pre class=" language-cmd"><code class="language-cmd">cd /tmpchmod +x NVIDIA\esxcli software vib install -v /tmp/NVIDIA\.vib --maintenance-mode</code></pre><p><a href="https://www.dingqian.net/usr/uploads/2020/03/149448893.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/149448893.png" alt="img"></a></p><p>等待几分钟，安装成功以后会有提示信息，可能在安装信息中提示不需要重启，但是强烈建议重启一下主机来验证驱动是否正常，有碰到过重启以后驱动报错的情况。</p><p><a href="https://www.dingqian.net/usr/uploads/2020/03/1328377712.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/1328377712.png" alt="img"></a></p><p>重启完主机以后使用 <strong>nvidia-smi</strong> 命令来验证驱动是否正常，正常情况下能看到类似如下信息：</p><p><a href="https://www.dingqian.net/usr/uploads/2020/03/2217482415.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/2217482415.png" alt="img"></a></p><p>特别注意2点：1、ECC模式是否显示off  2、默认情况下vSphere会使用vsga模式，而不是vGPU模式，所以能看到最下面xorg条目，这个我们后面改。</p><p>在部分时候，特别是使用全新的GPU，可能会看到nvidia-smi信息里面ECC区域不是off状态，而是0，这说明你现在的ECC是启用的状态，并不是所有vgpu都可以使用ECC，如果你不能确认你的环境是否需要启用ECC，那建议先关闭ECC。</p><p><a href="https://www.dingqian.net/usr/uploads/2020/03/2654749240.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/2654749240.png" alt="img"></a></p><p>使用命令来关闭ECC，注意，启用或者关闭ECC都需要重启主机。</p><p><strong>nvidia-smi -e 0</strong></p><p><a href="https://www.dingqian.net/usr/uploads/2020/03/1378805658.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/1378805658.png" alt="img"></a></p><p>更多关于ECC的信息，请参考：</p><p><a href="https://docs.nvidia.com/grid/latest/grid-software-quick-start-guide/index.html#disabling-enabling-ecc-memory">https://docs.nvidia.com/grid/latest/grid-software-quick-start-guide/index.html#disabling-enabling-ecc-memory</a></p><p>在确认驱动状态没问题以后，我们登陆vCenter，定位到<strong>主机-配置-图形</strong>，编辑<strong>主机图形设置</strong>，可以看到默认是共享模式，也就是vsga，我们需要切换到<strong>“直接共享“</strong>才能使用vGPU。</p><p>2种GPU分配策略，在有多个GPU的时候生效。</p><p>默认最佳性能模式，会在所有可能的GPU上去运行虚拟机，即VM1运行在GPU1、VM2运行在GPU2，以此类推，尽可能平均的分布虚拟机，不会让GPU闲着。</p><p>GPU整合模式，会在一个GPU核心上运行先启动的虚拟机，直到当前GPU没有资源才会去使用下一个GPU核心，这个模式多用在同一台服务器上运行多个vGPU profile的情况下。</p><p><a href="https://www.dingqian.net/usr/uploads/2020/03/696802411.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/696802411.png" alt="img"></a></p><p>除了主机的图形选项，针对每个GPU也都可以单独设置共享模式，第一次使用需要在这里再切换一下，主要是需要重启xorg服务来改变配置，不同vSphere版本界面可能不能，部分vSphere 6.5早期版本需要手动重启xorg服务。</p><p><a href="https://www.dingqian.net/usr/uploads/2020/03/682515054.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/682515054.png" alt="img"></a></p><p>更改成功以后就没有xorg条目了，可以开始使用vGPU了！</p><p><a href="https://www.dingqian.net/usr/uploads/2020/03/51672901.png"><img src="https://www.dingqian.net/usr/uploads/2020/03/51672901.png" alt="img"></a></p>]]></content>
      
      
      <categories>
          
          <category> 虚拟机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vSphere </tag>
            
            <tag> vGPU </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>全网最全ESXI6-7各个版本下载包含发布时间版本号MD5SHA1</title>
      <link href="/2021/10/09/quan-wang-zui-quan-esxi6-7-ge-ge-ban-ben-xia-zai-bao-han-fa-bu-shi-jian-ban-ben-hao-md5sha1/"/>
      <url>/2021/10/09/quan-wang-zui-quan-esxi6-7-ge-ge-ban-ben-xia-zai-bao-han-fa-bu-shi-jian-ban-ben-hao-md5sha1/</url>
      
        <content type="html"><![CDATA[<p>本文归纳整理了VMware-VMvisor-Installer 6.7 ESXI版本发布时间，对应的内部版本号，及MD5SUM、SHA1SUM值，下载地址可能随时失效，下载资源来自网络，下载后请核对MD5SUM、SHA1SUM值，</p><p><strong>如下载地址无法点击，表示暂无下载地址！网盘分享默认密码****“1111”</strong></p><p><strong>ESXI6.7****官方原版镜像：</strong></p><table><thead><tr><th><strong>版本</strong></th><th><strong>发布时间</strong></th><th><strong>内部编号</strong></th><th><strong>名称</strong></th><th><strong>down1</strong></th><th><strong>down2</strong></th></tr></thead><tbody><tr><td>6.7U3b</td><td>2019-12-05</td><td>15160138</td><td>VMware-VMvisor-Installer-201912001-15160138.x86_64.iso</td><td><a href="https://pan.baidu.com/s/1K4bZoWv9mFtDwuc-VGyPqA">down1</a></td><td><a href="https://down2.130.cloud/vmware/esxi6.7/VMware-VMvisor-Installer-201912001-15160138.x86_64.iso">donw2</a></td></tr><tr><td>6.7U3</td><td>2019-08-20</td><td>14320388</td><td>VMware-VMvisor-Installer-6.7.0.update03-14320388.x86_64.iso</td><td><a href="https://pan.baidu.com/s/1k0y4nsMoWUm2ToUFizq4Fw">down1</a></td><td><a href="https://down2.130.cloud/vmware/esxi6.7/VMware-VMvisor-Installer-6.7.0.update03-14320388.x86_64.iso">down2</a></td></tr><tr><td>6.7U2</td><td>2019-04-11</td><td>13006603</td><td>VMware-VMvisor-Installer-6.7.0.update02-13006603.x86_64.iso</td><td><a href="https://pan.baidu.com/s/1nltBdh36SGyn1sSmGfYoTA">down1</a></td><td><a href="https://down2.130.cloud/vmware/esxi6.7/VMware-VMvisor-Installer-6.7.0.update02-13006603.x86_64.iso">down2</a></td></tr><tr><td>6.7U1</td><td>2018-10-16</td><td>10302608</td><td>VMware-VMvisor-Installer-6.7.0.update01-10302608.x86_64.iso</td><td><a href="https://pan.baidu.com/s/1T0FzPdDQKQVO06Yvk7MMRg">down1</a></td><td><a href="https://down2.130.cloud/vmware/esxi6.7/VMware-VMvisor-Installer-6.7.0.update01-10302608.x86_64.iso">down2</a></td></tr><tr><td>6.7</td><td>2018-04-17</td><td>8169922</td><td>VMware-VMvisor-Installer-6.7.0-8169922.x86_64.iso</td><td><a href="https://pan.baidu.com/s/1_xXGxwU73tDFK3UPO51FiQ">down1</a></td><td><a href="https://down2.130.cloud/vmware/esxi6.7/VMware-VMvisor-Installer-6.7.0-8169922.x86_64.iso">down2</a></td></tr></tbody></table><table><thead><tr><th><strong>版本</strong></th><th><strong>MD5SUM</strong></th><th><strong>SHA1SUM</strong></th></tr></thead><tbody><tr><td>6.7U3b</td><td>562178fbcf2e582f116a874c358697de</td><td>4864a0b745bc07b6507e12027d74d5ac14956d5c</td></tr><tr><td>6.7U3</td><td>cafb95ae04245eb3e93fed1602b0fd3b</td><td>415f08313062d1f8d46162dc81a009dbdbc59b3b</td></tr><tr><td>6.7U2</td><td>a87ae18fdeb29c19a8b0c064a81498dc</td><td>7905e7a2bd08e6825d17d3fa43fb2b9ce80f2412</td></tr><tr><td>6.7U1</td><td>e10c4c3fcc017faab9659f49b0baee97</td><td>4635ecdb818330f42603aa91616463d9a70f5c8b</td></tr><tr><td>6.7</td><td>bd218f0f26510e690695116d8628e4af</td><td>332731ffb6715cd7a469ce0f6b81aeda6f624be7</td></tr></tbody></table><p><strong>ESXI6.7_DELL****官方镜像：</strong></p><table><thead><tr><th><strong>版本</strong></th><th><strong>发布时间</strong></th><th><strong>名称</strong></th><th><strong>down1</strong></th><th><strong>down2</strong></th></tr></thead><tbody><tr><td>6.7U3A04</td><td>2020-07-22</td><td>VMware-VMvisor-Installer-6.7.0.update03-15160138.x86_64-DellEMC_Customized-A04.iso</td><td><a href="https://pan.baidu.com/s/1kv6rr1RYZflGhfCa9X4KGA">down1</a></td><td><a href="https://dl.dell.com/FOLDER06032473M/1/VMware-VMvisor-Installer-6.7.0.update03-15160138.x86_64-DellEMC_Customized-A04.iso">down2</a></td></tr><tr><td>6.7U3A03</td><td>2020-03-09</td><td>VMware-VMvisor-Installer-6.7.0.update03-15160138.x86_64-DellEMC_Customized-A03.iso</td><td><a href="https://pan.baidu.com/s/1h7JptODW2UvTjC712QQ1Kw">down1</a></td><td><a href="https://dl.dell.com/FOLDER06012675M/1/VMware-VMvisor-Installer-6.7.0.update03-15160138.x86_64-DellEMC_Customized-A03.iso">down2</a></td></tr></tbody></table><table><thead><tr><th><strong>版本</strong></th><th><strong>MD5SUM</strong></th><th><strong>SHA1SUM</strong></th></tr></thead><tbody><tr><td>6.7U3A04</td><td>5F4C614D3D8AFBF619182FE0AD07AE8B</td><td>3A57CEB3EDAD6AA989200C7F64B8B6A0A771767B</td></tr><tr><td>6.7U3A03</td><td>317C97216AEDB6B2E31AE5E532F4818F</td><td>7721F4CF91C8308F888315FB454F9EA79A1D4572</td></tr></tbody></table><p><strong>ESXI6.7_HPE****官方镜像：</strong></p><table><thead><tr><th><strong>版本</strong></th><th><strong>发布时间</strong></th><th><strong>名称</strong></th><th><strong>down1</strong></th><th><strong>down2</strong></th></tr></thead><tbody><tr><td>6.7U3</td><td>2020-10-05</td><td>VMware-ESXi-6.7.0-Update3-16713306-HPE-Gen9plus-670.U3.10.6.0.83-Oct2020.iso</td><td><a href="https://pan.baidu.com/s/12IlEqNIcxz9_lgPcFTnoMA">down1</a></td><td><a href="https://down2.130.cloud/vmware/esxi6.7_hpe/VMware-ESXi-6.7.0-Update3-16713306-HPE-Gen9plus-670.U3.10.6.0.83-Oct2020.iso">down2</a></td></tr></tbody></table><table><thead><tr><th><strong>版本</strong></th><th><strong>MD5SUM</strong></th><th><strong>SHA1SUM</strong></th></tr></thead><tbody><tr><td>6.7U3</td><td>899C03390C4B9E2952E78C107ECAA6DB</td><td>6F38B0AB210B0CED9196C8F68F9A7E5C0199CE79</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 虚拟机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vSphere </tag>
            
            <tag> ESXI </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
